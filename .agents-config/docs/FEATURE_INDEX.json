{
  "metadata": {
    "id": "soundspan-feature-index",
    "version": "2026-02-21.01",
    "description": "Canonical machine-readable feature map for rapid codebase navigation and targeted verification.",
    "last_updated": "2026-02-21T16:18:00Z",
    "update_expectation": "Whenever a feature is introduced, changed significantly, or removed, update or explicitly verify impacted entries in this file."
  },
  "sources": {
    "frontendFeatureRoot": "frontend/features",
    "frontendRouteRoot": "frontend/app",
    "backendRouteRoot": "backend/src/routes",
    "backendServiceRoot": "backend/src/services",
    "backendTestRoot": "backend/src",
    "frontendTestRoot": "frontend/tests"
  },
  "coverage": {
    "frontend_feature_dirs": [
      "album",
      "artist",
      "audiobook",
      "discover",
      "home",
      "library",
      "podcast",
      "search",
      "settings"
    ],
    "verification_rules": [
      "Whenever a feature is introduced, changed significantly, or removed, update or explicitly verify impacted entries.",
      "Every directory under frontend/features must appear in coverage.frontend_feature_dirs.",
      "Every frontend feature directory in coverage.frontend_feature_dirs must appear in at least one features[].frontend.feature_dirs entry."
    ]
  },
  "features": [
    {
      "id": "library-and-home",
      "name": "Library and Home Experience",
      "summary": "Core local library browsing, home dashboard, station shortcuts, and track preference interactions.",
      "update_expectation": "Update or verify when library/home browsing, playback entrypoints, or preference interactions change.",
      "frontend": {
        "feature_dirs": [
          "library",
          "home"
        ],
        "routes": [
          "frontend/app/library/page.tsx",
          "frontend/app/page.tsx",
          "frontend/app/radio/page.tsx"
        ],
        "primary_files": [
          "frontend/features/library/components/TracksList.tsx",
          "frontend/features/home/components/LibraryRadioStations.tsx",
          "frontend/components/player/MiniPlayer.tsx"
        ]
      },
      "backend": {
        "routes": [
          "backend/src/routes/library.ts",
          "backend/src/routes/homepage.ts",
          "backend/src/routes/listeningState.ts"
        ],
        "services": [
          "backend/src/services/musicScanner.ts",
          "backend/src/services/trackPreference.ts"
        ]
      },
      "tests": {
        "targeted_commands": [
          "npm --prefix backend test -- --runInBand src/routes/__tests__/libraryRuntime.test.ts src/routes/__tests__/homepageRuntime.test.ts",
          "npm --prefix frontend run test:component",
          "npm --prefix frontend run test:unit"
        ],
        "primary_specs": [
          "backend/src/routes/__tests__/libraryRuntime.test.ts",
          "backend/src/routes/__tests__/homepageRuntime.test.ts",
          "frontend/tests/component/trackPreferenceButtons.component.test.ts"
        ]
      },
      "docs": [
        "README.md"
      ],
      ".agents-config/docs": [
        ".agents-config/docs/AGENT_CONTEXT.md",
        ".agents-config/docs/TEST_MATRIX.md"
      ]
    },
    {
      "id": "album-and-artist",
      "name": "Album and Artist Surfaces",
      "summary": "Album and artist detail pages, action bars, popular tracks, related track actions, and provider gap-fill loading UX.",
      "update_expectation": "Update or verify when album/artist page behavior, track actions, or navigation links change.",
      "frontend": {
        "feature_dirs": [
          "album",
          "artist"
        ],
        "routes": [
          "frontend/app/album/[id]/page.tsx",
          "frontend/app/artist/[id]/page.tsx"
        ],
        "primary_files": [
          "frontend/features/album/components/TrackList.tsx",
          "frontend/features/album/hooks/useTidalGapFill.ts",
          "frontend/features/album/hooks/useYtMusicGapFill.ts",
          "frontend/features/artist/components/PopularTracks.tsx",
          "frontend/features/artist/components/ArtistActionBar.tsx"
        ]
      },
      "backend": {
        "routes": [
          "backend/src/routes/artists.ts",
          "backend/src/routes/library.ts"
        ],
        "services": [
          "backend/src/services/coverArt.ts",
          "backend/src/services/enrichment.ts"
        ]
      },
      "tests": {
        "targeted_commands": [
          "npm --prefix backend test -- --runInBand src/routes/__tests__/artistsRuntime.test.ts",
          "npm --prefix frontend run test:component"
        ],
        "primary_specs": [
          "backend/src/routes/__tests__/artistsRuntime.test.ts",
          "frontend/tests/component/remainingViewsOverflowMenu.component.test.ts"
        ]
      },
      "docs": [
        "README.md"
      ],
      ".agents-config/docs": [
        ".agents-config/docs/TEST_MATRIX.md"
      ]
    },
    {
      "id": "discover-and-mixes",
      "name": "Discover Weekly, Mood, and Mixes",
      "summary": "Recommendation generation, discover weekly behavior, mood buckets, and mix refresh flows.",
      "update_expectation": "Update or verify when discover/mix recommendation behavior, playlist generation, or provider gap-fill behavior changes.",
      "frontend": {
        "feature_dirs": [
          "discover"
        ],
        "routes": [
          "frontend/app/discover/page.tsx",
          "frontend/app/mix/page.tsx"
        ],
        "primary_files": [
          "frontend/features/discover/components/DiscoverActionBar.tsx",
          "frontend/features/discover/hooks/useDiscoverData.ts",
          "frontend/features/discover/hooks/useDiscoverProviderGapFill.ts"
        ]
      },
      "backend": {
        "routes": [
          "backend/src/routes/discover.ts",
          "backend/src/routes/mixes.ts",
          "backend/src/routes/recommendations.ts"
        ],
        "services": [
          "backend/src/services/discoverWeekly.ts",
          "backend/src/services/discovery/discoveryRecommendations.ts",
          "backend/src/services/hybridSimilarity.ts",
          "backend/src/services/moodBucketService.ts"
        ]
      },
      "tests": {
        "targeted_commands": [
          "npm --prefix backend test -- --runInBand src/routes/__tests__/discoverRuntime.test.ts src/routes/__tests__/mixesRuntime.test.ts",
          "npm --prefix backend test -- --runInBand src/services/__tests__/hybridSimilarity.test.ts src/services/discovery/__tests__/discoveryRecommendationsService.test.ts",
          "npm --prefix frontend run test:unit"
        ],
        "primary_specs": [
          "backend/src/routes/__tests__/discoverRuntime.test.ts",
          "backend/src/routes/__tests__/mixesRuntime.test.ts",
          "backend/src/services/__tests__/hybridSimilarity.test.ts",
          "backend/src/services/discovery/__tests__/discoveryRecommendationsService.test.ts",
          "frontend/features/discover/hooks/useDiscoverProviderGapFill.test.ts"
        ]
      },
      "docs": [
        "README.md"
      ],
      ".agents-config/docs": [
        ".agents-config/docs/AGENT_CONTEXT.md",
        ".agents-config/docs/TEST_MATRIX.md"
      ]
    },
    {
      "id": "podcasts",
      "name": "Podcasts",
      "summary": "Podcast discovery, subscriptions, episodes, and download/playback workflows.",
      "update_expectation": "Update or verify when podcast discovery/subscription/playback/download behavior changes.",
      "frontend": {
        "feature_dirs": [
          "podcast"
        ],
        "routes": [
          "frontend/app/podcasts/page.tsx"
        ],
        "primary_files": [
          "frontend/components/PodcastPlayer.tsx",
          "frontend/features/podcast/components/EpisodeList.tsx"
        ]
      },
      "backend": {
        "routes": [
          "backend/src/routes/podcasts.ts"
        ],
        "services": [
          "backend/src/services/podcastDownload.ts",
          "backend/src/services/podcastCache.ts",
          "backend/src/services/podcastindex.ts"
        ]
      },
      "tests": {
        "targeted_commands": [
          "npm --prefix backend test -- --runInBand src/routes/__tests__/podcastsCoreRuntime.test.ts src/routes/__tests__/podcastsDiscoveryRuntime.test.ts",
          "npm --prefix backend test -- --runInBand src/services/__tests__/podcastDownloadRuntime.test.ts"
        ],
        "primary_specs": [
          "backend/src/routes/__tests__/podcastsCoreRuntime.test.ts",
          "backend/src/routes/__tests__/podcastsDiscoveryRuntime.test.ts",
          "backend/src/services/__tests__/podcastDownloadRuntime.test.ts"
        ]
      },
      "docs": [
        "docs/INTEGRATIONS.md"
      ],
      ".agents-config/docs": [
        ".agents-config/docs/TEST_MATRIX.md"
      ]
    },
    {
      "id": "audiobooks",
      "name": "Audiobooks",
      "summary": "Audiobook browsing, chapters, and playback controls.",
      "update_expectation": "Update or verify when audiobook import, browsing, or playback behavior changes.",
      "frontend": {
        "feature_dirs": [
          "audiobook"
        ],
        "routes": [
          "frontend/app/audiobooks/series/[name]/page.tsx"
        ],
        "primary_files": [
          "frontend/features/audiobook/components/ChapterList.tsx",
          "frontend/features/audiobook/components/PlayControls.tsx"
        ]
      },
      "backend": {
        "routes": [
          "backend/src/routes/audiobooks.ts"
        ],
        "services": [
          "backend/src/services/audiobookshelf.ts",
          "backend/src/services/audiobookCache.ts"
        ]
      },
      "tests": {
        "targeted_commands": [
          "npm --prefix backend test -- --runInBand src/routes/__tests__/audiobooksRuntime.test.ts src/routes/__tests__/audiobooksAdvancedRuntime.test.ts",
          "npm --prefix backend test -- --runInBand src/services/__tests__/audiobookshelfService.test.ts"
        ],
        "primary_specs": [
          "backend/src/routes/__tests__/audiobooksRuntime.test.ts",
          "backend/src/routes/__tests__/audiobooksAdvancedRuntime.test.ts",
          "backend/src/services/__tests__/audiobookshelfService.test.ts"
        ]
      },
      "docs": [
        "docs/INTEGRATIONS.md"
      ],
      ".agents-config/docs": [
        ".agents-config/docs/TEST_MATRIX.md"
      ]
    },
    {
      "id": "search-and-browse",
      "name": "Search and Browse",
      "summary": "Library search, browse flows, and result surfaces across local and integration-backed sources. Deezer album cover search uses multi-variant title matching with fuzzy scoring-based candidate selection.",
      "update_expectation": "Update or verify when search relevance, filters, or browse result contracts change.",
      "frontend": {
        "feature_dirs": [
          "search"
        ],
        "routes": [
          "frontend/app/search/page.tsx",
          "frontend/app/browse/playlists/page.tsx"
        ],
        "primary_files": [
          "frontend/features/search/components/SoulseekSongsList.tsx"
        ]
      },
      "backend": {
        "routes": [
          "backend/src/routes/search.ts",
          "backend/src/routes/browse.ts"
        ],
        "services": [
          "backend/src/services/search.ts",
          "backend/src/services/deezer.ts",
          "backend/src/services/soulseek.ts"
        ]
      },
      "tests": {
        "targeted_commands": [
          "npm --prefix backend test -- --runInBand src/routes/__tests__/searchRuntime.test.ts src/routes/__tests__/browseRuntime.test.ts",
          "npm --prefix backend test -- --runInBand src/services/__tests__/searchService.test.ts"
        ],
        "primary_specs": [
          "backend/src/routes/__tests__/searchRuntime.test.ts",
          "backend/src/routes/__tests__/browseRuntime.test.ts",
          "backend/src/services/__tests__/searchService.test.ts",
          "backend/src/services/__tests__/deezerService.test.ts"
        ]
      },
      "docs": [
        "README.md"
      ],
      ".agents-config/docs": [
        ".agents-config/docs/TEST_MATRIX.md"
      ]
    },
    {
      "id": "settings-and-device",
      "name": "Settings and Device Link",
      "summary": "User/admin configuration surfaces, cache/device controls, and system settings.",
      "update_expectation": "Update or verify when settings contracts, device link flow, or admin operations change.",
      "frontend": {
        "feature_dirs": [
          "settings"
        ],
        "routes": [
          "frontend/app/settings/page.tsx",
          "frontend/app/device/page.tsx"
        ],
        "primary_files": [
          "frontend/features/settings/components/sections/LinkDeviceSection.tsx",
          "frontend/features/settings/components/sections/CacheSection.tsx"
        ]
      },
      "backend": {
        "routes": [
          "backend/src/routes/settings.ts",
          "backend/src/routes/systemSettings.ts",
          "backend/src/routes/deviceLink.ts"
        ],
        "services": [
          "backend/src/utils/systemSettings.ts",
          "backend/src/services/notificationPolicyService.ts"
        ]
      },
      "tests": {
        "targeted_commands": [
          "npm --prefix backend test -- --runInBand src/routes/__tests__/settingsDisplayNameCompat.test.ts src/routes/__tests__/systemSettingsRuntime.test.ts src/routes/__tests__/deviceLinkRuntime.test.ts",
          "npm --prefix frontend run test:component",
          "npm --prefix frontend run lint"
        ],
        "primary_specs": [
          "backend/src/routes/__tests__/systemSettingsRuntime.test.ts",
          "backend/src/routes/__tests__/deviceLinkRuntime.test.ts"
        ]
      },
      "docs": [
        "docs/CONFIGURATION_AND_SECURITY.md"
      ],
      ".agents-config/docs": [
        ".agents-config/docs/TEST_MATRIX.md"
      ]
    },
    {
      "id": "playlists-queue-and-player",
      "name": "Playlists, Queue, and Player Surfaces",
      "summary": "Queue manipulation, playlist actions, overflow menus, and playback controls across mini/full/overlay players.",
      "update_expectation": "Update or verify when queue semantics, playlist actions, or player controls/menus change.",
      "frontend": {
        "feature_dirs": [],
        "routes": [
          "frontend/app/playlist/[id]/page.tsx",
          "frontend/app/queue/page.tsx"
        ],
        "primary_files": [
          "frontend/components/ui/TrackOverflowMenu.tsx",
          "frontend/lib/audio-controls-context.tsx",
          "frontend/lib/audio-playback-context.tsx",
          "frontend/lib/audio-playback-persistence-guards.ts",
          "frontend/components/player/AudioPlaybackOrchestrator.tsx",
          "frontend/lib/audio-engine/videoJsSegmentedEngine.ts",
          "frontend/lib/audio-engine/segmentedRepresentationPolicy.ts",
          "frontend/components/player/FullPlayer.tsx",
          "frontend/components/player/OverlayPlayer.tsx",
          "frontend/components/player/MiniPlayer.tsx"
        ]
      },
      "backend": {
        "routes": [
          "backend/src/routes/playlists.ts",
          "backend/src/routes/playbackState.ts"
        ],
        "services": [
          "backend/src/services/programmaticPlaylists.ts"
        ]
      },
      "tests": {
        "targeted_commands": [
          "npm --prefix frontend run test:component",
          "npm --prefix frontend run test:unit",
          "npm --prefix backend test -- --runInBand src/routes/__tests__/playlistsRuntime.test.ts"
        ],
        "primary_specs": [
          "frontend/tests/component/trackOverflowMenu.component.test.ts",
          "frontend/tests/component/queuePageOverflowMenu.component.test.ts",
          "frontend/tests/component/miniPlayerEnhancements.component.test.ts",
          "frontend/tests/component/audioPlaybackTimeGuard.component.test.ts",
          "frontend/tests/unit/playNextQueueControl.test.ts",
          "frontend/tests/unit/audioPlaybackPersistence.test.ts",
          "frontend/tests/unit/prewarmValidationTimeout.test.ts",
          "frontend/tests/unit/segmentedRepresentationPolicy.test.ts",
          "frontend/tests/unit/segmentedPlaybackRegressionPolicy.test.ts",
          "backend/src/routes/__tests__/playlistsRuntime.test.ts"
        ]
      },
      "docs": [
        "README.md"
      ],
      ".agents-config/docs": [
        ".agents-config/docs/TEST_MATRIX.md"
      ]
    },
    {
      "id": "social-and-listen-together",
      "name": "Social Presence and Listen Together",
      "summary": "Presence, social history, and synchronized listen-together sessions. The ListenTogetherSocket class includes transient-conflict retry with exponential backoff for seek() and reportReady() operations.",
      "update_expectation": "Update or verify when social presence, listen-together sync, or related contracts change.",
      "frontend": {
        "feature_dirs": [],
        "routes": [
          "frontend/app/listen-together/page.tsx",
          "frontend/app/my-history/page.tsx"
        ],
        "primary_files": [
          "frontend/components/layout/ActivityPanel.tsx",
          "frontend/components/layout/socialNavigation.ts",
          "frontend/lib/listen-together-socket.ts"
        ]
      },
      "backend": {
        "routes": [
          "backend/src/routes/social.ts",
          "backend/src/routes/listenTogether.ts"
        ],
        "services": [
          "backend/src/services/listenTogether.ts",
          "backend/src/services/listenTogetherManager.ts",
          "backend/src/services/listenTogetherSocket.ts"
        ]
      },
      "tests": {
        "targeted_commands": [
          "npm --prefix backend test -- --runInBand src/routes/__tests__/listenTogetherRuntime.test.ts src/routes/__tests__/socialCompat.test.ts",
          "npm --prefix frontend run test:coverage:social",
          "npm --prefix frontend run test:component:coverage:changed"
        ],
        "primary_specs": [
          "backend/src/routes/__tests__/listenTogetherRuntime.test.ts",
          "backend/src/routes/__tests__/socialCompat.test.ts",
          "frontend/tests/component/activityPanel.component.test.ts",
          "frontend/tests/component/listenTogetherSocketRetry.component.test.ts"
        ]
      },
      "docs": [
        "docs/TESTING.md"
      ],
      ".agents-config/docs": [
        ".agents-config/docs/TEST_MATRIX.md"
      ]
    },
    {
      "id": "streaming-integrations-and-subsonic",
      "name": "Streaming Integrations and OpenSubsonic",
      "summary": "TIDAL/YouTube streaming integrations and OpenSubsonic-compatible API surfaces.",
      "update_expectation": "Update or verify when integration auth/streaming behavior or OpenSubsonic compatibility changes.",
      "frontend": {
        "feature_dirs": [],
        "routes": [
          "frontend/app/settings/page.tsx",
          "frontend/app/sync/page.tsx"
        ],
        "primary_files": [
          "frontend/features/settings/components/sections/SubsonicSection.tsx"
        ]
      },
      "backend": {
        "routes": [
          "backend/src/routes/tidalStreaming.ts",
          "backend/src/routes/youtubeMusic.ts",
          "backend/src/routes/subsonic.ts"
        ],
        "services": [
          "backend/src/services/tidalStreaming.ts",
          "backend/src/services/youtubeMusic.ts",
          "backend/src/services/tidal.ts"
        ]
      },
      "tests": {
        "targeted_commands": [
          "npm --prefix backend test -- --runInBand src/routes/__tests__/tidalStreamingRuntime.test.ts src/routes/__tests__/youtubeMusicRuntime.test.ts src/routes/__tests__/subsonicRuntimeFocused.test.ts",
          "npm --prefix backend test -- --runInBand src/routes/__tests__/subsonicCoreCompat.test.ts src/routes/__tests__/subsonicBrowseCompat.test.ts"
        ],
        "primary_specs": [
          "backend/src/routes/__tests__/tidalStreamingRuntime.test.ts",
          "backend/src/routes/__tests__/youtubeMusicRuntime.test.ts",
          "backend/src/routes/__tests__/subsonicRuntimeFocused.test.ts",
          "backend/src/routes/__tests__/subsonicCoreCompat.test.ts"
        ]
      },
      "docs": [
        "docs/INTEGRATIONS.md",
        "docs/OPENSUBSONIC_COMPATIBILITY.md"
      ],
      ".agents-config/docs": [
        ".agents-config/docs/TEST_MATRIX.md"
      ]
    },
    {
      "id": "logging-and-observability-governance",
      "name": "Logging and Observability Governance",
      "summary": "Shared frontend/backend/python logging helpers, standards documentation, and policy-backed raw-logging compliance enforcement.",
      "update_expectation": "Update or verify when shared logger modules, logging governance policy, or compliance scripts change.",
      "frontend": {
        "feature_dirs": [],
        "routes": [],
        "primary_files": [
          "frontend/lib/logger.ts",
          "frontend/components/providers/GlobalErrorBoundary.tsx",
          "frontend/components/providers/AudioErrorBoundary.tsx",
          "frontend/components/ServiceWorkerRegistration.tsx"
        ]
      },
      "backend": {
        "routes": [],
        "services": [
          "backend/src/utils/logger.ts",
          "backend/src/services/segmented-streaming/trace.ts",
          ".agents-config/scripts/enforce-agent-policies.mjs",
          ".agents-config/scripts/verify-logging-compliance.mjs",
          "services/common/logging_utils.py"
        ]
      },
      "tests": {
        "targeted_commands": [
          "npm --prefix backend test -- --runInBand src/utils/__tests__/logger.test.ts",
          "npm --prefix frontend run test:unit -- tests/unit/logger.test.ts",
          "python3 -m py_compile services/common/logging_utils.py services/ytmusic-streamer/app.py services/tidal-downloader/app.py",
          "npm run logging:compliance:verify",
          "node .agents-config/scripts/enforce-agent-policies.mjs"
        ],
        "primary_specs": [
          "backend/src/utils/__tests__/logger.test.ts",
          "frontend/tests/unit/logger.test.ts",
          ".agents-config/scripts/verify-logging-compliance.mjs"
        ]
      },
      "docs": [],
      ".agents-config/docs": [
        ".agents-config/docs/LOGGING_STANDARDS.md",
        ".agents-config/docs/AGENT_RULES.md",
        ".agents-config/docs/AGENT_CONTEXT.md",
        ".agents-config/docs/CONTEXT_INDEX.json",
        ".agents-config/docs/TEST_MATRIX.md"
      ]
    }
  ]
}
